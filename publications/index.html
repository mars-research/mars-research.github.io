<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Recent Publications | Mars Research Group</title>
<meta name="keywords" content="">
<meta name="description" content="2024 Zhaofeng Li, Vikram Narayanan, Xiangdong Chen, Jerry Zhang, Anton Burtsev. Rust for Linux: Understanding Security Impact of Rust on the Linux Kernel. In Proceedings of the Annual Computer Security Applications Conference (ACSAC&#39;24), December 2024.
Xiangdong Chen, Zhaofeng Li, Jerry Zhang, Anton Burtsev. Veld: Verified Linux Drivers. In Proceedings of the 2nd Workshop on Kernel Isolation, Safety and Verification (KISV 2024), November 2024.
Xiangdong Chen, Zhaofeng Li, Tirth Jain, Vikram Narayanan, Anton Burtsev.">
<meta name="author" content="">
<link rel="canonical" href="https://mars-research.github.io/publications/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css" integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://mars-research.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://mars-research.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://mars-research.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://mars-research.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://mars-research.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Recent Publications" />
<meta property="og:description" content="2024 Zhaofeng Li, Vikram Narayanan, Xiangdong Chen, Jerry Zhang, Anton Burtsev. Rust for Linux: Understanding Security Impact of Rust on the Linux Kernel. In Proceedings of the Annual Computer Security Applications Conference (ACSAC&#39;24), December 2024.
Xiangdong Chen, Zhaofeng Li, Jerry Zhang, Anton Burtsev. Veld: Verified Linux Drivers. In Proceedings of the 2nd Workshop on Kernel Isolation, Safety and Verification (KISV 2024), November 2024.
Xiangdong Chen, Zhaofeng Li, Tirth Jain, Vikram Narayanan, Anton Burtsev." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mars-research.github.io/publications/" /><meta property="article:section" content="" />



<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Recent Publications"/>
<meta name="twitter:description" content="2024 Zhaofeng Li, Vikram Narayanan, Xiangdong Chen, Jerry Zhang, Anton Burtsev. Rust for Linux: Understanding Security Impact of Rust on the Linux Kernel. In Proceedings of the Annual Computer Security Applications Conference (ACSAC&#39;24), December 2024.
Xiangdong Chen, Zhaofeng Li, Jerry Zhang, Anton Burtsev. Veld: Verified Linux Drivers. In Proceedings of the 2nd Workshop on Kernel Isolation, Safety and Verification (KISV 2024), November 2024.
Xiangdong Chen, Zhaofeng Li, Tirth Jain, Vikram Narayanan, Anton Burtsev."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Recent Publications",
      "item": "https://mars-research.github.io/publications/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Recent Publications",
  "name": "Recent Publications",
  "description": "2024 Zhaofeng Li, Vikram Narayanan, Xiangdong Chen, Jerry Zhang, Anton Burtsev. Rust for Linux: Understanding Security Impact of Rust on the Linux Kernel. In Proceedings of the Annual Computer Security Applications Conference (ACSAC'24), December 2024.\nXiangdong Chen, Zhaofeng Li, Jerry Zhang, Anton Burtsev. Veld: Verified Linux Drivers. In Proceedings of the 2nd Workshop on Kernel Isolation, Safety and Verification (KISV 2024), November 2024.\nXiangdong Chen, Zhaofeng Li, Tirth Jain, Vikram Narayanan, Anton Burtsev.",
  "keywords": [
    
  ],
  "articleBody": "2024 Zhaofeng Li, Vikram Narayanan, Xiangdong Chen, Jerry Zhang, Anton Burtsev. Rust for Linux: Understanding Security Impact of Rust on the Linux Kernel. In Proceedings of the Annual Computer Security Applications Conference (ACSAC'24), December 2024.\nXiangdong Chen, Zhaofeng Li, Jerry Zhang, Anton Burtsev. Veld: Verified Linux Drivers. In Proceedings of the 2nd Workshop on Kernel Isolation, Safety and Verification (KISV 2024), November 2024.\nXiangdong Chen, Zhaofeng Li, Tirth Jain, Vikram Narayanan, Anton Burtsev. Limitations and Opportunities of Modern Hardware Isolation Mechanisms. In Proceedings of the 2024 USENIX Annual Technical Conference (USENIX ATC), July 2024.\n2023 Vikram Narayanan, Claudio Carvalho*, Angelo Ruocco*, Gheorghe Almási*, James Bottomley*, Mengmei Ye*, Tobin Feldman-Fitzthum*, Daniele Buono*, Hubertus Franke*, and Anton Burtsev. (*IBM Research) Remote attestation of confidential VMs using ephemeral vTPMs. In Proceedings of the 39th Annual Computer Security Applications Conference (ACSAC 2023), December 2023.\nXiangdong Chen, Zhaofeng Li, Lukas Mesicek, Vikram Narayanan and Anton Burtsev. Atmosphere: Towards Practical Verified Kernels in Rust. In Proceedings of the 1st Workshop on Kernel Isolation, Safety and Verification (KISV 2023), October 2023.\nArthur Lafrance (University of California, Irvine), David Detweiler (University of California, Irvine), Zhaofeng Li, Xiangdong Chen, Vikram Narayanan and Anton Burtsev. Extending Rust with Support for Zero Copy Communication. In Proceedings of the 12th Workshop on Programming Languages and Operating Systems (PLOS 2023), October 2023.\nAnton Burtsev, Vikram Narayanan, Yongzhe Huang, Kaiming Huang, Gang Tan, and Trent Jaeger. Evolving Operating System Kernels Towards Secure Kernel-Driver Interfaces. In Proceedings of the 19th Workshop on Hot Topics in Operating Systems (HOTOS ‘23). June 2023.\nVikram Narayanan and Anton Burtsev. The Opportunities and Limitations of Extended Page Table Switching for Fine-Grained Isolation. In IEEE Security \u0026 Privacy Magazine vol. 21, no. 3, pp. 16-26, May-June 2023.\nVikram Narayanan, David Detweiler, Tianjiao Huang, and Anton Burtsev. DRAMHiT: A Hash Table architected for the Speed of DRAM. In Proceedings of the 18th European Conference on Computer Systems (EuroSys ‘23), May 2023.\n2022 Yongzhe Huang, Vikram Narayanan, David Detweiler, Kaiming Huang, Gang Tan, Trent Jaeger, and Anton Burtsev. KSplit: Automating Device Driver Isolation. In 16th USENIX Symposium on Operating Systems Design and Implementation (OSDI ‘22), July 2022.\n2021 Zhaofeng Li, Tianjiao Huang, Vikram Narayanan and Anton Burtsev (University of California, Irvine). Understanding the Overheads of Hardware and Language-Based IPC Mechanisms. In Proceedings of the 11th Workshop on Programming Languages and Operating Systems (PLOS 2021), October 2021.\nAnton Burtsev, Dan Appel, David Detweiler, Tianjiao Huang, Zhaofeng Li, Vikram Narayanan (University of California, Irvine) and Gerd Zellweger (VMware Research). Isolation in Rust: What is Missing?. In Proceedings of the 11th Workshop on Programming Languages and Operating Systems (PLOS 2021), October 2021.\n2020 Vikram Narayanan, Tianjiao Huang, David Detweiler, Dan Appel, Zhaofeng Li, Gerd Zellweger, Anton Burtsev. RedLeaf: Isolation and Communication in a Safe Operating System. In 14th USENIX Symposium on Operating Systems Design and Implementation (OSDI), November 2020.\nVikram Narayanan, Yongzhe Huang, Gang Tan, Trent Jaeger, and Anton Burtsev. Lightweight Kernel Isolation with Virtualization and VM Functions. In Proceedings of the 16th ACM SIGPLAN/SIGOPS International Conference on Virtual Execution Environments (VEE 20), March 2020. [Best Paper Award]\n2019 Vikram Narayanan, Abhiram Balasubramanian, Charlie Jacobsen, Sarah Spall, Scott Bauer, Michael Quigley, Aftab Hussain, Abdullah Younis, Junjie Shen, Moinak Bhattacharyya, and Anton Burtsev. LXDs: Towards Isolation of Kernel Subsystems. In 2019 USENIX Annual Technical Conference (USENIX ATC 19), July 2019.\nVikram Narayanan (University of California, Irvine), Marek S. Baranowski (University of Utah), Leonid Ryzhyk (VMware Research), Zvonimir Rakamarić (University of Utah), Anton Burtsev (University of California, Irvine). RedLeaf: Towards An Operating System for Safe and Verified Firmware. In Proceedings of the 17th Workshop on Hot Topics in Operating Systems (HotOS), May 2019.\n",
  "wordCount" : "606",
  "inLanguage": "en",
  "datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://mars-research.github.io/publications/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Mars Research Group",
    "logo": {
      "@type": "ImageObject",
      "url": "https://mars-research.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://mars-research.github.io/" accesskey="h" title="Mars Research Group (Alt + H)">Mars Research Group</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://mars-research.github.io/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://mars-research.github.io/publications" title="Publications">
                    <span class="active">Publications</span>
                </a>
            </li>
            <li>
                <a href="https://mars-research.github.io/projects" title="Projects">
                    <span>Projects</span>
                </a>
            </li>
            <li>
                <a href="https://mars-research.github.io/news" title="News">
                    <span>News</span>
                </a>
            </li>
            <li>
                <a href="https://mars-research.github.io/posts" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://mars-research.github.io/reading-group" title="Reading Group">
                    <span>Reading Group</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Recent Publications
    </h1>
    <div class="post-meta"><a href="https://github.com/mars-research/mars-research.github.io/blob/main/content/publications.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> 
  <div class="post-content"><h3 id="2024">2024<a hidden class="anchor" aria-hidden="true" href="#2024">#</a></h3>
<p>Zhaofeng Li, Vikram Narayanan, Xiangdong Chen, Jerry Zhang, Anton Burtsev.
<a href="./doc/2024-acsac-rfl.pdf">Rust for Linux: Understanding Security Impact of Rust on the Linux Kernel</a>. In
<em>Proceedings of the Annual Computer Security Applications Conference (ACSAC'24)</em>, December 2024.</p>
<p>Xiangdong Chen, Zhaofeng Li, Jerry Zhang, Anton Burtsev.
<a href="./doc/2024-kisv-veld.pdf">Veld: Verified Linux Drivers</a>. In  <em>Proceedings of the
2nd Workshop on Kernel Isolation, Safety and Verification (KISV 2024)</em>, November 2024.</p>
<p>Xiangdong Chen, Zhaofeng Li, Tirth Jain, Vikram Narayanan, Anton Burtsev.
<a href="/doc/2024-atc-hw-isolation.pdf">Limitations and Opportunities of Modern Hardware
Isolation Mechanisms</a>. In <em>Proceedings of the
2024 USENIX Annual Technical Conference (USENIX ATC)</em>, July 2024.</p>
<h3 id="2023">2023<a hidden class="anchor" aria-hidden="true" href="#2023">#</a></h3>
<p>Vikram Narayanan, Claudio Carvalho<sup>*</sup>, Angelo Ruocco<sup>*</sup>,
Gheorghe Almási<sup>*</sup>, James Bottomley<sup>*</sup>, Mengmei
Ye<sup>*</sup>, Tobin Feldman-Fitzthum<sup>*</sup>, Daniele Buono<sup>*</sup>,
Hubertus Franke<sup>*</sup>, and Anton Burtsev. (<sup>*</sup>IBM Research)
<a href="/doc/2023-acsac-svsm-vtpm.pdf">Remote attestation of confidential VMs using ephemeral
vTPMs</a>. In <em>Proceedings of the 39th Annual
Computer Security Applications Conference (ACSAC 2023)</em>, December 2023.</p>
<p>Xiangdong Chen, Zhaofeng Li, Lukas Mesicek, Vikram Narayanan and Anton Burtsev.
<a href="/doc/2023-kisv-atmo.pdf">Atmosphere: Towards Practical Verified Kernels in
Rust</a>. In <em>Proceedings of the 1st Workshop on Kernel
Isolation, Safety and Verification (KISV 2023)</em>, October 2023.</p>
<p>Arthur Lafrance (University of California, Irvine), David Detweiler (University
of California, Irvine), Zhaofeng Li, Xiangdong Chen, Vikram Narayanan and Anton
Burtsev. <a href="/doc/2023-plos-rust-zerocopy.pdf">Extending Rust with Support for Zero Copy
Communication</a>. In <em>Proceedings of the
12th Workshop on Programming Languages and Operating Systems (PLOS 2023)</em>,
October 2023.</p>
<p>Anton Burtsev, Vikram Narayanan, Yongzhe Huang, Kaiming Huang, Gang Tan, and
Trent Jaeger. <a href="/doc/2023-hotos-kernel-interfaces.pdf">Evolving Operating System Kernels Towards Secure Kernel-Driver
Interfaces</a>. In <em>Proceedings of the 19th
Workshop on Hot Topics in Operating Systems (HOTOS &lsquo;23)</em>. June 2023.</p>
<p>Vikram Narayanan and Anton Burtsev. <a href="/doc/2023-ieee-sp-mag.pdf">The Opportunities and Limitations of
Extended Page Table Switching for Fine-Grained
Isolation</a>. In <em>IEEE
Security &amp; Privacy Magazine vol. 21, no. 3, pp. 16-26</em>, May-June 2023.</p>
<p>Vikram Narayanan, David Detweiler, Tianjiao Huang, and Anton Burtsev. <a href="/doc/2023-eurosys-dramhit.pdf">DRAMHiT:
A Hash Table architected for the Speed of
DRAM</a>.  In <em>Proceedings
of the 18th European Conference on Computer Systems (EuroSys &lsquo;23)</em>, May 2023.</p>
<h3 id="2022">2022<a hidden class="anchor" aria-hidden="true" href="#2022">#</a></h3>
<p>Yongzhe Huang, Vikram Narayanan, David Detweiler, Kaiming Huang, Gang Tan,
Trent Jaeger, and Anton Burtsev.  <a href="/doc/2022-osdi-ksplit.pdf">KSplit: Automating Device Driver
Isolation</a>.  In <em>16th
USENIX Symposium on Operating Systems Design and Implementation (OSDI &lsquo;22)</em>,
July 2022.</p>
<h3 id="2021">2021<a hidden class="anchor" aria-hidden="true" href="#2021">#</a></h3>
<p>Zhaofeng Li, Tianjiao Huang, Vikram Narayanan and Anton Burtsev (University of
California, Irvine). <a href="/doc/2021-plos-ipc-overheads.pdf">Understanding the Overheads of Hardware and
Language-Based IPC Mechanisms</a>. In
<em>Proceedings of the 11th Workshop on Programming Languages and Operating
Systems (PLOS 2021)</em>, October 2021.</p>
<p>Anton Burtsev, Dan Appel, David Detweiler, Tianjiao Huang, Zhaofeng Li, Vikram
Narayanan (University of California, Irvine) and Gerd Zellweger (VMware
Research). <a href="/doc/2021-plos-rust-isolation.pdf">Isolation in Rust: What is Missing?</a>.
In <em>Proceedings of the 11th Workshop on Programming Languages and Operating
Systems (PLOS 2021)</em>, October 2021.</p>
<h3 id="2020">2020<a hidden class="anchor" aria-hidden="true" href="#2020">#</a></h3>
<p>Vikram Narayanan, Tianjiao Huang, David Detweiler, Dan Appel, Zhaofeng
Li, Gerd Zellweger, Anton Burtsev. <a href="/doc/2020-osdi-redleaf.pdf">RedLeaf: Isolation and Communication in a
Safe Operating
System</a>. In
<em>14th USENIX Symposium on Operating Systems Design and Implementation (OSDI)</em>,
November 2020.</p>
<p>Vikram Narayanan, Yongzhe Huang, Gang Tan, Trent Jaeger, and Anton
Burtsev. <a href="/doc/2020-vee-lvds.pdf">Lightweight Kernel Isolation with Virtualization and VM
Functions</a>. In <em>Proceedings of the 16th ACM SIGPLAN/SIGOPS
International Conference on Virtual Execution Environments (VEE 20)</em>, March
2020. [Best Paper Award]</p>
<h3 id="2019">2019<a hidden class="anchor" aria-hidden="true" href="#2019">#</a></h3>
<p>Vikram Narayanan, Abhiram Balasubramanian, Charlie Jacobsen, Sarah Spall,
Scott Bauer, Michael Quigley, Aftab Hussain, Abdullah Younis, Junjie Shen,
Moinak Bhattacharyya, and Anton Burtsev. <a href="/doc/2019-atc-lxds.pdf">LXDs: Towards Isolation of Kernel
Subsystems</a>. In <em>2019
USENIX Annual Technical Conference (USENIX ATC 19)</em>, July 2019.</p>
<p>Vikram Narayanan (University of California, Irvine), Marek S. Baranowski
(University of Utah), Leonid Ryzhyk (VMware Research), Zvonimir Rakamarić
(University of Utah), Anton Burtsev (University of California, Irvine).
<a href="/doc/2019-hotos-redleaf.pdf">RedLeaf: Towards An Operating System for Safe and Verified
Firmware</a>. In <em>Proceedings of the 17th Workshop on Hot Topics
in Operating Systems (HotOS)</em>, May 2019.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://mars-research.github.io/">Mars Research Group</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
